<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.g06.springboot.mapper.FeedbackMapper">
	<resultMap id="BaseResultMap" type="com.g06.springboot.entity.User">
		<result column="id" jdbcType="INTEGER" property="id"/>
		<result column="userId" jdbcType="INTEGER" property="userId"/>
		<result column="suggestion" jdbcType="VARCHAR" property="suggestion"/>
		<result column="state" jdbcType="VARCHAR" property="state"/>
	</resultMap>

	<select id="loadAllFeedback" resultType="com.g06.springboot.entity.Feedback">
		select f.id,u.userId,u.username,f.suggestion,f.state from useraccount u,feedback f where u.userId = f.userId
	</select>

	<select id="loadFeedback" resultType="com.g06.springboot.entity.Feedback">
		select f.userId, u.username,f.suggestion,f.state from useraccount u,feedback f where u.userId = f.userId and u.userId = #{userId}
	</select>

	<insert id="addFeedback">
		insert into feedback(userId,suggestion,state) values (#{userId},#{suggestion},'未处理')
	</insert>

	<delete id="removeFeedback">
		delete from feedback where id = #{id}
	</delete>

	<update id="modifyFeedback">
		update feedback set state = '已读' where id = #{id}
	</update>




</mapper>